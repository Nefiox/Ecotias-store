<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../partials/head') %>
        <link rel="stylesheet" href="/css/editProduct.css">
        <title>Editar producto</title>
</head>

<body>
    <%- include('../partials/header') %>
    <main>
        <h2>Editar producto: <%= product.name %></h2>
        <form action="/productos/<%= product.id %>?_method=PUT" method="POST" enctype="multipart/form-data">
            <div class="crear_producto">
                <div class="field order1">
                    <label for="name">Nombre</label>
                    <div class="control">
                        <input type="text" name="name" class="input_info" placeholder="Ej: Omeprazole"
                            value="<%= product.name %>">
                    </div>
                </div>
                <div class="field order2">
                    <label for="category">Categoría</label>
                    <div class="control">
                        <select name="category">
                            <% for( let i = 0; i < categories.length; i++ ) { %>
                                <% if (categories[i].id == product.category_id) { %>
                                    <option value="<%= categories[i].id %>" selected>
                                        <%= categories[i].name %>
                                    </option>
                                <% } else { %>
                                    <option value="<%= categories[i].id %>">
                                        <%= categories[i].name %>
                                    </option>
                                <% } %>
                            <% } %>
                        </select>
                    </div>
                </div>
                <div class="field order3">
                    <label for="maker">Fabricante</label>
                    <div class="control">
                        <select name="maker">
                            <% for( let i = 0; i < makers.length; i++ ) { %>
                                <% if (makers[i].id == product.maker_id) { %>
                                    <option value="<%= makers[i].id %>" selected>
                                        <%= makers[i].name %> 
                                    </option>
                                <% } else { %>
                                    <option value="<%= makers[i].id %>">
                                        <%= makers[i].name %> 
                                    </option>
                                <% } %>
                            <% } %>
                        </select>
                    </div>
                </div>
                <div class="field order4">
                    <label for="price">Precio</label>
                    <div class="control">
                        <input type="number" name="price" class="input_info" placeholder="Ej: 750" value="<%= product.price %>">
                    </div>
                </div>
                <div class="field order6">
                    <label for="description">Descripción</label>
                    <div class="control">
                        <textarea name="description" id="" class="input_info"><%= product.description %></textarea>
                    </div>
                </div>
                <div class="field order5">
                    <p>Imágen actual</p>
                    <div class="control">
                        <img src="/images/productImages/<%= product.image ? product.image : 'default.jpg'%>" alt="producto">
                    </div>
                </div>
                <div class="field order7">
                    <label for="newProductImage">Subir nueva imágen</label>
                    <div class="control">
                        <input type="file" name="newProductImage" id="newProductImage">
                    </div>
                </div>
            </div>
            <div class="botones">
                <div class="buttonAction_save">
                    <div class="control">
                        <button type="submit">Guardar producto</button>
                    </div>
                </div>
        </form>
                <div class="buttonAction_delete">
                    <div class="control">
                        <form action="/productos/<%= product.id %>?_method=DELETE" method="POST">
                        <button type="submit">Eliminar producto</button>
                        </form>
                    </div>
                </div>
            </div>
    </main>
    <%- include('../partials/footer') %>
</body>

</html>